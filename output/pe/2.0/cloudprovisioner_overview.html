<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Documentation | Puppet Labs - PE 2.0 » Cloud Provisioning</title>
  	<meta name="description" content="The open source leader in data center automation">
  	<link rel="alternate" type="text/xml" title="Puppet Labs RSS 0.92 Feed" href="http://puppetlabs.com/feed/rss/">
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Atom Feed" href="http://puppetlabs.com/feed/atom/">
  	<link rel="alternate" type="application/rss+xml" title="Puppet Labs RSS 2.0 Feed" href="http://puppetlabs.com/feed/">
  	<link rel="pingback" href="http://puppetlabs.com/xmlrpc.php">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://puppetlabs.com/xmlrpc.php?rsd" />
    <link rel='index' title='Puppet Labs' href='http://docs.puppetlabs.com' />

<!-- Google stats -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1537572-5");
pageTracker._setDomainName(".puppetlabs.com");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- End Google stats -->


    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='/files/javascripts/html5.js'></script>
    <script type='text/javascript' src='/files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='/files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='/files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='/files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='/files/javascripts/ampersands.js'></script>

     <!--Add rotation jQuery Script -->
	 	
    <script type='text/javascript' src='/files/javascripts/addRotate.js'></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <link rel="canonical" href="http://docs.puppetlabs.com" />
    <!-- /all in one seo pack -->
	
    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="/files/stylesheets/style.css" media="screen"> 
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->
  
    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->		

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>



        
  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>		
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->		

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/puppet/">
              <span>Products</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>            
              <li>
                <ul>
<li class="page_item page-item-769"><a href="http://www.puppetlabs.com/puppet/puppet-enterprise/" title="Puppet Enterprise">Puppet Enterprise</a></li>
<li class="page_item page-item-757"><a href="http://www.puppetlabs.com/puppet/introduction/" title="Puppet">Puppet</a></li>
<li class="page_item page-item-956"><a href="http://www.puppetlabs.com/puppet/how-to-buy/" title="How to Buy">How to Buy</a></li>
<li class="page_item page-item-1159"><a href="http://forge.puppetlabs.com/" title="Module Forge">Module Forge</a></li>

<li class="page_item page-item-2415"><a href="http://www.puppetlabs.com/mcollective/introduction/" title="MCollective">MCollective</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>

            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://www.puppetlabs.com/services/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-839"><a href="http://www.puppetlabs.com/services/support/" title="Enterprise Support">Enterprise Support</a></li>
<li class="page_item page-item-845"><a href="http://www.puppetlabs.com/services/training-workshops/" title="On-Site Training &amp; Consulting">On-Site Training &amp; Consulting</a></li>
<li class="page_item page-item-849"><a href="/category/events/upcoming/" title="Events &amp; Public Training">Events &amp; Public Training</a></li>
<li class="page_item page-item-851"><a href="http://www.puppetlabs.com/services/partners/" title="Partners">Partners</a></li>
<li class="page_item page-item-1037"><a href="/resources/customer-support" title="Customer Support">Customer Support</a></li>
            </ul>
          </li>
          <li id="resources-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/resources/">
              <span>Resources</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/resources/overview-2/" title="Overview">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/resources/customer-support/" title="Customer Support">Customer Support</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com" title="Documentation">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download" title="Downloads">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com" title="Module Forge">Module Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/request-whitepapers.html" title="White Papers">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki" title="Wiki">Wiki</a></li>
            </ul>

          </li>

<li id="customer-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/customers/companies/">
              <span>Customers</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/customers/companies/" title="Overview">Companies</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/customers/case-studies/" title="Case Studies">Case Studies</a></li>
<li class="page_item page-item-1040"><a href="http://www.puppetlabs.com/customers/product-testimonials/" title="Product Testimonials">Product Testimonials</a></li>
<li class="page_item page-item-872"><a href="http://www.puppetlabs.com/customers/what-customers-are-saying/" title="ervice Testimonials">Service Testimonials</a></li>
	</ul>
          </li>
         <li id="community-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/community/">
              <span>Community</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/community/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/blog" title="Blog">Blog</a></li>
<li class="page_item page-item-2264"><a href="http://www.puppetlabs.com/community/puppet-camp/" title="Puppet Camp">Puppet Camp</a></li>
<li class="page_item page-item-2249"><a href="http://www.puppetlabs.com/community/user-groups-and-devops-groups/" title="User Groups &amp; DevOps Groups">User Groups &amp; DevOps Groups</a></li>
<li class="page_item page-item-2215"><a href="http://www.puppetlabs.com/community/presentations/" title="Presentations">Presentations</a></li>

<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/videos/" title="Videos">Videos</a></li>
<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/badges/" title="Badges">Badges</a></li>
            </ul>
          </li>

          <li id="company-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>

            <ul>
              <li class="page_item page-item-2316"><a href="http://www.puppetlabs.com/company/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://www.puppetlabs.com/company/news/" title="News">News</a></li>
<li class="page_item page-item-1571"><a href="http://www.puppetlabs.com/company/jobs/" title="Jobs">Jobs</a></li>
<li class="page_item page-item-2313"><a href="http://www.puppetlabs.com/company/contact-us/" title="Contact Us">Contact Us</a></li>
            </ul>
          </li>
    		</ul>	   
          <div id="misc-navigation">

			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
				<li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/#contact">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">

			  <div>
				<input type="hidden" name="cx" value="017884045025332504017:1mnj-dlgfcc" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>

          </div>
      </nav>
    	</div>
    </header>  

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">PE 2.0 » Cloud Provisioning</span></h1>
          <ul id="doc-navigation">
            <li><a href="/">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
               	            <dl>
	              <dt>Puppet Guides</dt>
                      <dd><a href="/index.html">Index</a></dd>
                  <dt>Puppet References</dt>
                      <dd><a href="/references/stable/type.html">Resource Types</a></dd>
                      <dd><a href="/references/stable/function.html">Functions</a></dd>
                      <dd><a href="/references/stable/metaparameter.html">Metaparameters</a></dd>
                      <dd><a href="/references/stable/configuration.html">Configuration</a></dd>
                      <dt>References By Version</dt>
                      <dd><a href="/references/2.7.6/">2.7.6</a></dd>
                      <dd><a href="/references/2.6.12/">2.6.12</a></dd>
                      <dd><a href="/references/0.25.5/">0.25.5</a></dd>
                      <dd><a href="/references/0.24.8/">0.24.8</a></dd>
                      <dd><a href="/references/">Other Versions</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="/mcollective/index.html">Index</a></dd>
                      <dd><a href="/mcollective/simplerpc/index.html">SimpleRPC</a></dd>
                      <dd><a href="/mcollective/roadmap/index.html">Roadmap</a></dd>
                      <dd><a href="/mcollective/releasenotes.html">Release Notes</a></dd>
                      <dd><a href="/mcollective/reference/index.html">References</a></dd>
	            </dl>

            </li>
            <li><a href="/contribute.html">Contribute</a></li>
          </ul>
        </div>
      </section>
    
      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1 id="getting-started-with-puppet-enterprise-cloud-provisioning">Getting Started With Puppet Enterprise Cloud Provisioning</h1>

<p>Puppet Enterprise provides you with the capability to provision,
configure and manage VMware virtual machines and Amazon Web Services
EC2 instances.  It allows you to create and bootstrap virtual machines,
classify those machines in your Puppet Enterprise environment,
install Puppet Enterprise on them and automatically add them to your
console.</p>

<hr />

<h2 id="overview">Overview</h2>

<p>Puppet Enterprise cloud provisioning extends Puppet by adding new actions for
creating and puppetizing new machines using VMware vSphere and Amazon
Web Service&rsquo;s EC2.</p>

<p>It provides you with an easy command line interface to:</p>

<ul>
  <li>Create a new VMware virtual machine or Amazon EC2 instance</li>
  <li>Classify the new virtual machine or instance in the Puppet Enterprise
console</li>
  <li>Automatically install Puppet Enterprise and integrate with your
existing Puppet infrastructure.</li>
</ul>

<p>This provides you with a quick and efficient workflow for adding nodes
to your Puppet Enterprise environment.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Cloud provisioning ships with Puppet Enterprise 2.0 and later.</p>

<h3 id="services">Services</h3>

<p>The following services and credentials are required:</p>

<p>For VMware you will need:</p>

<ul>
  <li>VMware vSphere 4.0 and later</li>
  <li>VMware vCenter</li>
</ul>

<p>For Amazon Web Services you will need:</p>

<ul>
  <li>An existing Amazon account with support for EC2</li>
</ul>

<h2 id="installing">Installing</h2>

<p>Cloud provisioning can be installed on any Puppet master or node.
You will be prompted during the Puppet Enterprise installation to
install cloud provisioning. Answer &lsquo;yes&rsquo; to ensure it is installed.</p>

<p>If you&rsquo;re using an answer file to install Puppet Enterprise this
capability can be installed by setting the <code>q_puppet_cloud_install</code> option to <code>y</code>.</p>

<pre><code>q_puppet_cloud_install=y
</code></pre>

<p>You can then provision from the command line of any configured
Puppet Enterprise Master or agent.</p>

<h2 id="configuration">Configuration</h2>

<p>To use cloud provisioning, we need to do some initial configuration to tell it
about the services we wish to connect to and manage. </p>

<h3 id="vmware">VMware</h3>

<p>To connect to a VMware vSphere server you will need the following information:</p>

<ul>
  <li>The name of your vCenter host, for example <code>vc1.example.com</code></li>
  <li>Your vCenter username</li>
  <li>Your vCenter password</li>
  <li>A public key hash (we&rsquo;ll get this when we first connect to the vCenter below)</li>
</ul>

<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/06Er_8dHbOM?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/06Er_8dHbOM?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h3 id="amazon-web-services">Amazon Web Services</h3>

<p>To connect to Amazon Web Services you will need the following information:</p>

<ul>
  <li>AWS Access Key ID</li>
  <li>AWS Secret Key ID</li>
  <li>AWS SSH key pair</li>
  <li>A properly configured security group. Security groups control access to the Amazon instances you create.</li>
</ul>

<h4 id="amazon-web-service-credentials">Amazon Web Service credentials</h4>

<p>You can get find your Amazon Web Services credentials online in your Amazon account.</p>

<p>To view your credentials, go to <a href="http://aws.amazon.com">Amazon AWS</a> and click on the Account tab.</p>

<p><img src="./images/cloud/awsaccount.png" alt="AWS Account tab" /></p>

<p>Select the Security Credentials menu and from there the &ldquo;Access Credentials&rdquo;
section of the page, click on the &ldquo;Access Keys&rdquo; tab to view your Access Keys.</p>

<p>You need to record two pieces of information:</p>

<ul>
  <li>Access Key ID</li>
  <li>Secret Key ID</li>
</ul>

<p>To see your Secret Access Key, just click on the &ldquo;Show&rdquo; link under &ldquo;Secret
Access Key&rdquo;.</p>

<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/pc-LFM2-nwQ?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/pc-LFM2-nwQ?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h4 id="amazon-web-service-keys">Amazon Web Service keys</h4>

<p>Your Amazon Web Services EC2 account will need to have at least one Amazon-managed SSH
keypair, and a security group that allows outbound traffic on port 8140 and SSH (port 22)
traffic from the machine that is provisioning your cloud instances.</p>

<p>To find or create your Amazon key-pair browse to the <a href="https://console.aws.amazon.com/ec2/">Amazon Web Service
EC2 console</a>.</p>

<p><img src="./images/cloud/ec2console.png" alt="AWS EC2 Console" /></p>

<p>Select the Key Pairs menu item from the dashboard. If you don&rsquo;t have any
existing key pairs you can create one with the <code>Create Key Pairs</code> button.
Specify a new name for the key pair and it will be created and the private key
file automatically downloaded to your host.  Make a note of the name of your
key pair because we&rsquo;re going to use that later when creating new instances.</p>

<p>To add or edit a security group select the Security Groups menu item
from the dashboard. You should see a list of the available security
groups.  If no groups exist you can create a new one by clicking the
<code>Create Security Groups</code> button or you can edit an existing group.</p>

<p><img src="./images/cloud/awssecgroup.png" alt="AWS Security Groups" /></p>

<p>To add the required rules select the <code>Inbound</code> tab and add an SSH rule.
You can also specify a specific <code>Source</code> to lock the source IP down to
an appropriate source IP or network.  Click <code>Add Rule</code> to add the rule
and then <code>Apply Rule Changes</code> to save.</p>

<h3 id="adding-your-credentials">Adding your credentials</h3>

<p>Our provisioning capability takes advantage of a cloud abstraction tool called Fog.  We
provide Fog as part of your Puppet Enterprise install, and all you need to do is configure it.</p>

<p>Firstly, create a file called <code>.fog</code> in your home directory, for example:</p>

<pre><code>$ touch ~/.fog
</code></pre>

<p>Populate this file with the credentials we&rsquo;ve just recorded for VMware vSphere or Amazon Web
Services (or both).  Your <code>.fog</code> file should look something like this:</p>

<pre><code>:default:
  :vsphere_server: vc01.example.com
  :vsphere_username: cloudprovisioner
  :vsphere_password: abc123
  :aws_access_key_id: AKIAIISJV5TZ3FPWU3TA
  :aws_secret_access_key: ABCDEFGHIJKLMNOP1234556/s
</code></pre>

<p>Replace <code>:vsphere_server</code> with the host name or IP address of your
vSphere server and populate the other options with the appropriate
credentials.</p>

<h2 id="provisioning-with-vmware">Provisioning with VMware</h2>

<p>Puppet Enteprise can help with creating and managing VMware virtual machines on your
vSphere server using vCenter.</p>

<p>If you&rsquo;re new to VMware vSphere then we recommend looking at the <a href="http://www.vmware.com/support/pubs/vs_pages/vsp_pubs_esx40_vc40.html">vSphere
documentation</a>.</p>

<h3 id="listing-vmware-vsphere-instances">Listing VMware vSphere instances</h3>

<p>Let&rsquo;s get started by listing the machines currently on our vSphere
server.  We do this by running the <code>puppet node_vmware list</code> command.</p>

<pre><code>$ puppet node_vmware list
</code></pre>

<p>The first time we run this command, we be asked to
confirm we&rsquo;re communicating with a trusted vSphere server:</p>

<pre><code>$ puppet node_vmware list
notice: Connecting ...·
err: The remote system presented a public key with hash
431dd5d0412aab11b14178290d9fcc5acb041d37f90f36f888de0cebfffff0a8 but
we're expecting a hash of &lt;unset&gt;.  If you are sure the remote system is
authentic set vsphere_expected_pubkey_hash: &lt;the hash printed in this
message&gt; in ~/.fog
err: Try 'puppet help node_vmware list' for usage
</code></pre>

<p>Confirm you&rsquo;ve specified the right vSphere host in your <code>.fog</code>
configuration file and then add the following option with the public key
hash that is returned to your <code>.fog</code> file:</p>

<pre><code>:vsphere_expected_pubkey_hash:431dd5d0412aab11b14178290d9fcc5acb041d37f90f36f888de0cebfffff0a8
</code></pre>

<p>Now we can run the <code>puppet node_vmware list</code> command and see a list of
our existing virtual machines:</p>

<pre><code>$ puppet node_vmware list
notice: Connecting ...
notice: Connected to vc01.example.com as cloudprovisioner (API version 4.1)
notice: Finding all Virtual Machines ... (Started at 12:16:01 PM)
notice: Control will be returned to you in 10 minutes at 12:26 PM if locating is unfinished.
Locating:          100% |ooooooooooooooooooooooooooooooooooooooooooooooooooo| Time: 00:00:34
notice: Complete
/Datacenters/Solutions/vm/master_template
powerstate: poweredOff
name:       master_template
hostname:   puppetmaster.example.com
instanceid: 5032415e-f460-596b-c55d-6ca1d2799311
ipaddress:  ---.---.---.---
template:   true

/Datacenters/Solutions2/vm/puppetagent
powerstate: poweredOn
name:       puppetagent
hostname:   agent.example.com
instanceid: 5032da5d-68fd-a550-803b-aa6f52fbf854
ipaddress:  192.168.100.218
template:   false
</code></pre>

<p>We can see that we&rsquo;ve connected to our vSphere server and returned a VMware
template and a virtual machine. VMware templates contain the information needed
to build new virtual machines, for example the operating system, hardware
configuration and other details needed to provision a machine. A virtual
machine is an existing machine that has already been provisioned on the vSphere
server.</p>

<p>The following information is returned:</p>

<ul>
  <li>The location of the template or machine</li>
  <li>The status of the machine, for example poweredOff or poweredOn</li>
  <li>The name of the template or machine on the vSphere server</li>
  <li>The host name of the machine</li>
  <li>The instanceid of the machine</li>
  <li>The IP address of the machine (templates don&rsquo;t have IP addresses)</li>
  <li>The type of entry - either a VMware template or a virtual machine</li>
</ul>

<h3 id="creating-a-new-vmware-virtual-machine">Creating a new VMware virtual machine</h3>

<p>Puppet Enterprise can also create and manage virtual machines from VMware
templates. To do this we can run the <code>puppet node_vmware</code> command with the <code>create</code> option.</p>

<pre><code>$ puppet node_vmware create --name=newpuppetmaster --template="/Datacenters/Solutions/vm/master_template"
notice: Connecting ...
notice: Connected to vc01.example.com as cloudprovisioner (API version 4.1)
notice: Locating VM at /Datacenters/Solutions/vm/master_template (Started at 12:38:58 PM)
notice: Control will be returned to you in 10 minutes at 12:48 PM if locating (1/2) is unfinished.
Locating (1/2):    100% |ooooooooooooooooooooooooooooooooooooooooooooooooooooooooo| Time: 00:00:16
notice: Starting the clone process (Started at 12:39:15 PM)
notice: Control will be returned to you in 10 minutes at 12:49 PM if starting (2/2) is unfinished.
Starting (2/2):    100% |ooooooooooooooooooooooooooooooooooooooooooooooooooooooooo| Time: 00:00:03
---
name: newpuppetmaster
power_state: poweredOff
...
status: success
</code></pre>

<p>Here we&rsquo;ve created a new virtual machine named <code>newpuppetmaster</code> with a
template of <code>/Datacenters/Solutions/vm/master_template</code> (we saw this template
earlier when we listed all the resources available on our vSphere server).  The
virtual machine is now created and will be powered on. Powering on may take
several minutes to complete.</p>

<object width="420" height="315"><param name="movie" value="http://www.youtube.com/v/dIVOS53ZPFc?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/dIVOS53ZPFc?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h3 id="starting-stopping-and-terminating-vmware-virtual-machines">Starting, stopping and terminating VMware virtual machines</h3>

<p>We&rsquo;ve created our virtual machine and it&rsquo;s started. We can also start and stop
virtual machines using the command <code>puppet node_vmware start</code> and <code>puppet
node_vmware stop</code> respectively:</p>

<p>The <code>start</code> and <code>stop</code> commands can be used like so:</p>

<pre><code>$ puppet node_vmware start /Datacenters/Solutions/vm/newpuppetmaster
</code></pre>

<p>You can see we&rsquo;ve specified the path to the virtual machine we wish to start,
in this case <code>/Datacenters/Solutions/vm/newpuppetmaster</code>.  </p>

<p>We can also stop this virtual machine:</p>

<pre><code>$ puppet node_vmware stop /Datacenters/Solutions/vm/newpuppetmaster
</code></pre>

<p>This will stop the running virtual machine (it may take a few minutes).</p>

<p>Lastly, we can terminate a VMware instance.  Be aware this will:</p>

<ul>
  <li>Force-shutdown the virtual machine</li>
  <li>Delete the virtual machine AND it&rsquo;s hard disk images</li>
</ul>

<p><strong>This is a destructive action that should only be taken when you wish to delete
the virtual machine!</strong></p>

<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/-o0h83LYSA0?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/-o0h83LYSA0?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h3 id="getting-more-help">Getting more help</h3>

<p>The <code>puppet node_vmware</code> command has extensive in-line help documentation and a man page.</p>

<p>To see the available command line options run:</p>

<pre><code>$ puppet help node_vmware
USAGE: puppet node_vmware &lt;action&gt; 

This subcommand provides a command line interface to work with VMware vSphere
Virtual Machine instances.  The goal of these actions is to easily create
new virtual machines, install Puppet onto them, and clean up when they're
no longer required.

OPTIONS:
--mode MODE                    - The run mode to use (user, agent, or master).
--render-as FORMAT             - The rendering format to use.
--verbose                      - Whether to log verbosely.
--debug                        - Whether to log debug information.

ACTIONS:
create       Create a new VM from a template
find         Find a VMware Virtual Machine
list         List VMware Virtual Machines
start        Start a Virtual Machine
stop         Stop a running Virtual Machine
terminate    Terminate (destroy) a VM

See 'puppet man node_vmware' or 'man puppet-node_vmware' for full help.
</code></pre>

<p>You can also view the man page for more detailed help.</p>

<pre><code>$ puppet man node_vmware
</code></pre>

<p>You can get help on individual commands by running:</p>

<pre><code>$ puppet help node_vmware commandname
</code></pre>

<p>For example:</p>

<pre><code>$ puppet help node_vmware start
</code></pre>

<h2 id="provisioning-with-amazon-web-services">Provisioning with Amazon Web Services</h2>

<p>Puppet Enterprise can also work with Amazon Web Services to create and manage new EC2 instances. </p>

<p>If you are new to Amazon Web Services we recommend reading the <a href="http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/">Getting Started
documentation</a>.</p>

<h3 id="listing-amazon-ec2-instances">Listing Amazon EC2 instances</h3>

<p>Let&rsquo;s start by listing our running EC2 instances.  To do this we&rsquo;re going to
use the <code>puppet node_aws list</code> command.</p>

<pre><code>$ puppet node_aws list
i-013eb462:
  created_at: Sat Nov 12 02:10:06 UTC 2011
  dns_name: ec2-107-22-110-102.compute-1.amazonaws.com
  id: i-013eb462
  state: running
i-019f0a62:
  created_at: Sat Nov 12 03:48:50 UTC 2011
  dns_name: ec2-50-16-145-167.compute-1.amazonaws.com
  id: i-019f0a62
  state: running
i-01a33662:
  created_at: Sat Nov 12 04:32:25 UTC 2011
  dns_name: ec2-107-22-79-148.compute-1.amazonaws.com
  id: i-01a33662
  state: running
</code></pre>

<p>Here we can see we&rsquo;ve got three running EC2 instances and the following information has been returned:</p>

<ul>
  <li>The instance name</li>
  <li>The date they were created on</li>
  <li>The DNS host name of the instance</li>
  <li>The ID of the instance</li>
  <li>The state of the instance, for example running or terminated</li>
</ul>

<p><strong>If you have no instances running then nothing will be returned</strong></p>

<h3 id="creating-a-new-amazon-ec2-instance">Creating a new Amazon EC2 instance</h3>

<p>Let&rsquo;s next try to create a new instance.  Again we use the <code>puppet
node_aws</code> command this time adding the <code>create</code> option:</p>

<p>To create a new EC2 instance we need to add three required options:</p>

<ul>
  <li>The AMI image we wish to start</li>
  <li>The name of the key pair to start the image with (in the section about credentials above we mentioned creating key pairs and making note of their name)</li>
  <li>The type of instance we wish to create. You can see a list of types <a href="http://aws.amazon.com/ec2/instance-types/">here</a></li>
</ul>

<p>Let&rsquo;s provide this information and run the command:</p>

<pre><code>$ puppet node_aws create --image ami-edae6384 --keyname cloudprovisioner --type m1.small
notice: Creating new instance ...
notice: Creating new instance ... Done
notice: Creating tags for instance ...
notice: Creating tags for instance ... Done
notice: Launching server i-df7ee898 ...
##################
notice: Server i-df7ee898 is now launched
notice: Server i-df7ee898 public dns name: ec2-50-18-93-82.us-east-1.compute.amazonaws.com
ec2-50-18-93-82.us-east-1.compute.amazonaws.com
</code></pre>

<p>We&rsquo;re we&rsquo;ve created a new instance using an AMI of <code>ami-edae6384</code>, a key named
<code>cloudprovisioner</code> and of the type <code>m1.small</code>. If you&rsquo;ve forgotten the
available key names on your account you can get a list using the <code>puppet
node_aws list_keynames</code> command:</p>

<pre><code>$ puppet node_aws list_keynames
cloudprovisioner (ad:d4:04:9f:b0:8d:e5:4e:4c:46:00:bf:88:4f:b6:c2:a1:b4:af:56)
</code></pre>

<p>You can also specify a variety of other options, including specifying the
region to start the instance in, and you can see a full list of these options
using the <code>puppet help node_aws create</code> command.</p>

<p>After the instance has been created, the public DNS name of the instance will be returned: <code>ec2-50-18-93-82.us-east-1.compute.amazonaws.com</code>.</p>

<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/dAqbLwYzMVk?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/dAqbLwYzMVk?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h3 id="connecting-to-an-ec2-instance">Connecting to an EC2 instance</h3>

<p>Once you&rsquo;ve created an EC2 instance you can then connect to it using SSH. To do
this we need the private key we downloaded earlier from the Amazon Web Services
console. Add this key to your local SSH configuration, usually in the <code>.ssh</code>
directory.</p>

<pre><code>$ cp mykey.pem ~/.ssh/mykey.pem
</code></pre>

<p>Ensure the <code>.ssh</code> directory and the key have appropriate permissions.</p>

<pre><code>$ chmod 0700 ~/.ssh
$ chmod 0600 ~/.ssh/mykey.pem
</code></pre>

<p>We can now use this key to connect to our new instance.</p>

<pre><code>$ ssh -i ~/.ssh/mykey.pem root@ec2-50-18-93-82.us-east-1.compute.amazonaws.com
</code></pre>

<h3 id="terminating-an-ec2-instance">Terminating an EC2 instance</h3>

<p>Once you&rsquo;ve finished with an EC2 instance you can easily terminate it.
Terminating an instance destroys the instance entirely and is a destructive
action that should only be performed when you&rsquo;ve finished with the instance. To
terminate an instance we use the <code>puppet node_aws terminate</code> command.</p>

<pre><code>$ puppet node_aws terminate ec2-50-18-93-82.us-east-1.compute.amazonaws.com
notice: Destroying i-df7ee898 (ec2-50-18-93-82.us-east-1.compute.amazonaws.com) ...
notice: Destroying i-df7ee898 (ec2-50-18-93-82.us-east-1.compute.amazonaws.com) ... Done
</code></pre>

<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/NKisTfXuJlw?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/NKisTfXuJlw?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h3 id="getting-more-help-1">Getting more help</h3>

<p>The <code>puppet node_aws</code> command has extensive in-line help documentation and a man page.</p>

<p>To see the available command line options run:</p>

<pre><code>$ puppet help node_aws
USAGE: puppet node_aws &lt;action&gt;

This subcommand provides a command line interface to work with Amazon EC2
machine instances.  The goal of these actions are to easily create new
machines, install Puppet onto them, and tear them down when they're no longer
required.

OPTIONS:
  --mode MODE                    - The run mode to use (user, agent, or master).
  --render-as FORMAT             - The rendering format to use.
  --verbose                      - Whether to log verbosely.
  --debug                        - Whether to log debug information.

ACTIONS:
  bootstrap        Create and initialize an EC2 instance using Puppet
  create           Create a new EC2 machine instance.
  fingerprint      Make a best effort to securely obtain the SSH host key
                   fingerprint
  list             List AWS EC2 node instances
  list_keynames    List available AWS EC2 key names
  terminate        Terminate an EC2 machine instance

See 'puppet man node_aws' or 'man puppet-node_aws' for full help.
</code></pre>

<p>You can also view the man page for more detailed help.</p>

<pre><code>$ puppet man node_aws
</code></pre>

<p>You can get help on individual commands by running:</p>

<pre><code>$ puppet help node_aws commandname
</code></pre>

<p>For example,</p>

<pre><code>$ puppet help node_aws list
</code></pre>

<h2 id="classifying-nodes">Classifying nodes</h2>

<p>Once you have created virtual machines or instances you can add them to
a group in the Puppet Enterprise console using the same command line
tools. In Puppet Enterprise this is called node classification.</p>

<p>To classify nodes and add them to your console groups we use the <code>puppet
node classify</code> command.</p>

<pre><code>$ puppet node classify \
--node-group=default \
--enc-server=localhost \
--enc-port=443 \
--enc-ssl \
--enc-auth-user=console \
--enc-auth-passwd=password \
ec2-50-19-149-87.compute-1.amazonaws.com

notice: Contacting https://localhost:443/ to classify
ec2-50-19-149-87.compute-1.amazonaws.com
complete
</code></pre>

<p>Here we&rsquo;re adding an AWS EC2 instance to the Puppet Enterprise console.
We specify the <code>--node-group</code> we&rsquo;d like to add the node to, in our case
the <code>default</code> group.</p>

<p>We also specify the user name, password, server, port and whether to use
SSL to connect. The user name and password we&rsquo;ve specified is set when
the Puppet Enterprise console is installed and if you don&rsquo;t know them can
be found in the <code>/etc/puppetlabs/installer/answers.install</code> file
generated during installation.</p>

<p>Lastly, we&rsquo;ve specified the name of the host we&rsquo;re classifying. If we
now navigate to the console we can see this host is added to the
<code>default</code> group.</p>

<p>To see additional help for node classification you can use the <code>puppet
help node classify</code> command.</p>

<object width="420" height="315"><param name="movie" value="http://www.youtube.com/v/LG6WQPVsBNg?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/LG6WQPVsBNg?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h2 id="installing-puppet">Installing Puppet</h2>

<p>In addition to the other actions we&rsquo;ve shown you we can also install Puppet
Enterprise (or Puppet) onto these new nodes. To do this we use the <code>puppet node
install</code> command.</p>

<pre><code>$ puppet node install --keyfile=~/.ssh/mykey.pem --login=root ec2-50-19-207-181.compute-1.amazonaws.com 
notice: Waiting for SSH response ...
notice: Waiting for SSH response ... Done
notice: Installing Puppet ...
puppetagent_certname: ec2-50-19-207-181.compute-1.amazonaws.com-ee049648-3647-0f93-782b-9f30e387f644
status: success
</code></pre>

<p>The <code>puppet node install</code> command uses SSH to connect to the host and install
Puppet Enterprise. By default it needs an SSH key, here specified using the
<code>--keyfile</code> option. For VMware this key should be loaded onto the template you
used to create your virtual machine. For Amazon EC2 it should be the key file
you used to create the instance. You also need to specify the account to login
as using the <code>--login</code> option. Lastly, we need to specify the specific host you
wish to install Puppet Enterprise on. </p>

<p>For the default installation Puppet Enterprise uses packages
provided by Puppet Labs and stored in Amazon S3 storage.  You can also specify
packages located on your local host or on a share in your local network.</p>

<p>In addition to these default configuration options we can specify a number of
additional options to control how and what we install on the host. We can
specify the specific version of Puppet Enterprise (or we can install open
source Puppet too) to install. We can also control the version of Facter to
install, the specific answers file to use to configure Puppet Enterprise, the
certificate name of the agent to be install and a variety of other options. To
see a full list of the available options use the <code>puppet help node install</code>
command.</p>

<object width="420" height="315"><param name="movie" value="http://www.youtube.com/v/F0hU94bBrQo?version=3&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/F0hU94bBrQo?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true" /></object>

<h2 id="classifying-and-installing-puppet-in-one-command">Classifying and Installing Puppet in one command</h2>

<p>Rather than using multiple commands to classify and install Puppet on a
node we can run the <code>init</code> command which performs both actions in a
single command. Let&rsquo;s look at an example of that:</p>

<pre><code>$ puppet node init \
--node-group=default \
--enc-server=localhost \
--enc-port=443 \
--enc-ssl \
--enc-auth-user=console \
--enc-auth-passwd=password \
--keyfile=~/.ssh/mykey.pem \
--login=root \
ec2-50-19-207-181.compute-1.amazonaws.com
</code></pre>

<p>Here we&rsquo;ve combined the options for the <code>puppet node classify</code> and
<code>puppet node install</code> commands. This will connect to the Puppet
Enterprise console, classify the node in the <code>default</code> group and then
install Puppet Enterprise on this node.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="missing-fog-file-or-credentials">Missing .fog file or credentials</h3>

<p>If you attempt to provision without creating a <code>.fog</code> file or without
populating the file with appropriate credentials:</p>

<p>For VMware you&rsquo;ll see the following error:</p>

<pre><code>$ puppet node_vmware list
notice: Connecting ...
err: Missing required arguments: vsphere_username, vsphere_password, vsphere_server
err: Try 'puppet help node_vmware list' for usage
</code></pre>

<p>For Amazon Web Services you&rsquo;ll see the following error:</p>

<pre><code>$ puppet node_aws list
err: Missing required arguments: aws_access_key_id,
aws_secret_access_key
err: Try 'puppet help node_aws list' for usage
</code></pre>

<p>Add the appropriate file or missing credentials to the file to resolve
this issue.</p>


            </div>
            <div class="secondary-content">
                  <div id="subCol">
                  
                  
                      <!-- 
<h3 class="chapter">Contents</h3>
                      
<ol class="toc">
  <li class="toc-lv2"><a href="#overview">Overview</a></li>
  <li class="toc-lv2"><a href="#prerequisites">Prerequisites</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#services">Services</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#installing">Installing</a></li>
  <li class="toc-lv2"><a href="#configuration">Configuration</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#vmware">VMware</a></li>
   <li class="toc-lv3"><a href="#amazon-web-services">Amazon Web Services</a></li>
   <li class="toc-lv3"><a href="#adding-your-credentials">Adding your credentials</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#provisioning-with-vmware">Provisioning with VMware</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#listing-vmware-vsphere-instances">Listing VMware vSphere instances</a></li>
   <li class="toc-lv3"><a href="#creating-a-new-vmware-virtual-machine">Creating a new VMware virtual machine</a></li>
   <li class="toc-lv3"><a href="#starting-stopping-and-terminating-vmware-virtual-machines">Starting, stopping and terminating VMware virtual machines</a></li>
   <li class="toc-lv3"><a href="#getting-more-help">Getting more help</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#provisioning-with-amazon-web-services">Provisioning with Amazon Web Services</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#listing-amazon-ec2-instances">Listing Amazon EC2 instances</a></li>
   <li class="toc-lv3"><a href="#creating-a-new-amazon-ec2-instance">Creating a new Amazon EC2 instance</a></li>
   <li class="toc-lv3"><a href="#connecting-to-an-ec2-instance">Connecting to an EC2 instance</a></li>
   <li class="toc-lv3"><a href="#terminating-an-ec2-instance">Terminating an EC2 instance</a></li>
   <li class="toc-lv3"><a href="#getting-more-help-1">Getting more help</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#classifying-nodes">Classifying nodes</a></li>
  <li class="toc-lv2"><a href="#installing-puppet">Installing Puppet</a></li>
  <li class="toc-lv2"><a href="#classifying-and-installing-puppet-in-one-command">Classifying and Installing Puppet in one command</a></li>
  <li class="toc-lv2"><a href="#troubleshooting">Troubleshooting</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#missing-fog-file-or-credentials">Missing .fog file or credentials</a></li>
</ol></li>
</ol>
 --> 

<ul>
  <li><strong><a href="./welcome_getting_started.html">Welcome to Puppet Enterprise</a></strong><ul style="display: none;">
      <li><a href="./welcome_getting_started.html">Getting Started</a></li>
      <li><a href="./welcome_roles.html">Components and Roles</a></li>
      <li><a href="./welcome_whats_new.html">What&rsquo;s New</a></li>
      <li><a href="./welcome_known_issues.html">Known Issues</a></li>
      <li><a href="./welcome_getting_support.html">Getting Support</a></li>
    </ul>
  </li>
  <li><strong><a href="./install_system_requirements.html">Installing Puppet Enterprise</a></strong><ul style="display: none;">
      <li><a href="./install_system_requirements.html">System Requirements</a></li>
      <li><a href="./install_preparing.html">Preparing to Install</a></li>
      <li><a href="./install_basic.html">Basic Installation</a></li>
      <li><a href="./install_upgrading.html">Upgrading</a></li>
      <li><a href="./install_automated.html">Automated Installation</a></li>
      <li><a href="./install_answer_file_reference.html">Answer File Reference</a></li>
      <li><a href="./install_what_and_where.html">What gets installed where?</a></li>
    </ul>
  </li>
  <li><strong><a href="./console_accessing.html">The Console</a></strong><ul style="display: none;">
      <li><a href="./console_accessing.html">Accessing the Console</a></li>
      <li><a href="./console_navigating.html">Navigating the Console</a></li>
      <li><a href="./console_reports.html">Viewing Reports and Inventory Data</a></li>
      <li><a href="./console_classes_groups.html">Grouping and Classifying Nodes</a></li>
      <li><a href="./console_live.html">Live Management</a></li>
      <li><a href="./console_live_resources.html">Live Management: Managing Resources</a></li>
      <li><a href="./console_live_puppet.html">Live Management: Controlling Puppet</a></li>
      <li><a href="./console_live_advanced.html">Live Management: Advanced Tasks</a></li>
    </ul>
  </li>
  <li><strong><a href="./puppet_overview.html">Puppet For New PE Users</a></strong><ul style="display: none;">
      <li><a href="./puppet_overview.html">Overview</a></li>
      <li><a href="./puppet_first_module.html">Your First Module</a></li>
      <li><a href="./puppet_classifying.html">Assigning a Class to a Node</a></li>
      <li><a href="./puppet_next_steps.html">Next Steps</a></li>
    </ul>
  </li>
  <li><strong><a href="./orchestration_overview.html">Orchestration For New PE Users</a></strong><ul style="display: none;">
      <li><a href="./orchestration_overview.html">Overview</a></li>
    </ul>
  </li>
  <li class="currentsection"><strong>Cloud Provisioning</strong><ul>
      <li class="currentpage"><strong><em>Overview:</em></strong>
<ol class="toc">
  <li class="toc-lv2"><a href="#overview">Overview</a></li>
  <li class="toc-lv2"><a href="#prerequisites">Prerequisites</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#services">Services</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#installing">Installing</a></li>
  <li class="toc-lv2"><a href="#configuration">Configuration</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#vmware">VMware</a></li>
   <li class="toc-lv3"><a href="#amazon-web-services">Amazon Web Services</a></li>
   <li class="toc-lv3"><a href="#adding-your-credentials">Adding your credentials</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#provisioning-with-vmware">Provisioning with VMware</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#listing-vmware-vsphere-instances">Listing VMware vSphere instances</a></li>
   <li class="toc-lv3"><a href="#creating-a-new-vmware-virtual-machine">Creating a new VMware virtual machine</a></li>
   <li class="toc-lv3"><a href="#starting-stopping-and-terminating-vmware-virtual-machines">Starting, stopping and terminating VMware virtual machines</a></li>
   <li class="toc-lv3"><a href="#getting-more-help">Getting more help</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#provisioning-with-amazon-web-services">Provisioning with Amazon Web Services</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#listing-amazon-ec2-instances">Listing Amazon EC2 instances</a></li>
   <li class="toc-lv3"><a href="#creating-a-new-amazon-ec2-instance">Creating a new Amazon EC2 instance</a></li>
   <li class="toc-lv3"><a href="#connecting-to-an-ec2-instance">Connecting to an EC2 instance</a></li>
   <li class="toc-lv3"><a href="#terminating-an-ec2-instance">Terminating an EC2 instance</a></li>
   <li class="toc-lv3"><a href="#getting-more-help-1">Getting more help</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#classifying-nodes">Classifying nodes</a></li>
  <li class="toc-lv2"><a href="#installing-puppet">Installing Puppet</a></li>
  <li class="toc-lv2"><a href="#classifying-and-installing-puppet-in-one-command">Classifying and Installing Puppet in one command</a></li>
  <li class="toc-lv2"><a href="#troubleshooting">Troubleshooting</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#missing-fog-file-or-credentials">Missing .fog file or credentials</a></li>
</ol></li>
</ol></li>
    </ul>
  </li>
  <li><strong><a href="./compliance_basics.html">The Compliance Workflow</a></strong><ul style="display: none;">
      <li><a href="./compliance_basics.html">Basics and UI</a></li>
      <li><a href="./compliance_using.html">Using the Compliance Workflow</a></li>
      <li><a href="./compliance_tutorial.html">Tutorial</a></li>
    </ul>
  </li>
  <li><strong><a href="./accounts_user_type.html">The PE Accounts Module</a></strong><ul style="display: none;">
      <li><a href="./accounts_user_type.html">The <code>pe_accounts::user</code> Type</a></li>
      <li><a href="./accounts_class.html">The <code>pe_accounts</code> Class</a></li>
    </ul>
  </li>
  <li><strong><a href="./maint_common_config_errors.html">Maintenance and Troubleshooting</a></strong><ul style="display: none;">
      <li><a href="./maint_common_config_errors.html">Common Configuration Errors</a></li>
    </ul>
  </li>
</ul>

                  
                                        <!-- New Ads are inserted here -->
		  			<div id="bannerImage" style="display:block;">&nbsp;</div>
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>  
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>
              
				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">
				
				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>
				
				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />
				
				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />
	
				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />
				
				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>
				
				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>
              
<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>
                
                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>	

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">

					
			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by James Turnbull and Jeff McCune, <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">411 NW Park Avenue</span>
           /
           <span class="locality">Portland</span>, 
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>          
      </div>
    </div>
    <script src="http://munchkin.marketo.net/munchkin.js" type="text/javascript"></script> <script>mktoMunchkin("307-QLA-991");</script> 
    
  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>

	</body>
</html>        
